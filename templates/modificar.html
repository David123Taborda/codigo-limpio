{% extends "base.html" %}

{% block title %}Modificar Registro{% endblock %}

{% block content %}
<h2>âœï¸ Modificar Registro</h2>

{% if registro %}
    <div class="resultado-box" style="margin-bottom: 30px;">
        <h3>ğŸ“‹ Datos Actuales del Registro #{{ registro[0] }}</h3>
        <div class="resultado-item">
            <span>ğŸ’° Ingreso Total:</span>
            <span>${{ "{:,.2f}".format(registro[1]) }}</span>
        </div>
        <div class="resultado-item">
            <span>ğŸ“‰ Deducciones de Ley:</span>
            <span>${{ "{:,.2f}".format(registro[2]) }}</span>
        </div>
        <div class="resultado-item">
            <span>ğŸ  Deducciones Personales:</span>
            <span>${{ "{:,.2f}".format(registro[3]) }}</span>
        </div>
        <div class="resultado-item">
            <span>ğŸ Renta Exenta:</span>
            <span>${{ "{:,.2f}".format(registro[4]) }}</span>
        </div>
        <div class="resultado-item">
            <span>ğŸ¯ Base Gravable Actual:</span>
            <span><strong>${{ "{:,.2f}".format(registro[5]) }}</strong></span>
        </div>
        <div class="resultado-item">
            <span>ğŸ“… Fecha de CreaciÃ³n:</span>
            <span>{{ registro[6] }}</span>
        </div>
    </div>

    <form method="POST" action="{{ url_for('calculadora.modificar', registro_id=registro[0]) }}">
        <div class="form-group">
            <label for="base_gravable">ğŸ’¼ Nueva Base Gravable (COP):</label>
            <input type="number" step="0.01" id="base_gravable" name="base_gravable" 
                   required value="{{ registro[5] }}" 
                   placeholder="Ingrese el nuevo valor de la base gravable">
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button type="submit" class="btn">âœ… Guardar Cambios</button>
            <a href="{{ url_for('calculadora.buscar') }}" class="btn" style="background: #6c757d;">âŒ Cancelar</a>
        </div>
    </form>

    <div style="margin-top: 30px; padding: 20px; background: #fff3cd; border-radius: 10px; border-left: 5px solid #ffc107;">
        <h3>âš ï¸ Advertencia</h3>
        <p style="margin: 10px 0; line-height: 1.6; color: #856404;">
            Esta acciÃ³n modificarÃ¡ Ãºnicamente el valor de la <strong>base gravable</strong> del registro. 
            Los demÃ¡s valores permanecerÃ¡n sin cambios. AsegÃºrate de ingresar el valor correcto antes de guardar.
        </p>
    </div>
{% else %}
    <div style="text-align: center; padding: 40px; background: #f8d7da; border-radius: 10px; margin: 20px 0;">
        <h3>âŒ Registro no encontrado</h3>
        <p style="color: #721c24; margin: 20px 0;">
            El registro que intentas modificar no existe o fue eliminado.
        </p>
        <a href="{{ url_for('calculadora.buscar') }}" class="btn">ğŸ” Volver al Historial</a>
    </div>
{% endif %}
{% endblock %}
